<!DOCTYPE html>
<html>
<head>
    <!--Import materialize.css-->
    <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.96.1/css/materialize.min.css">-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
    <link rel="stylesheet" href="style.css"></link>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
</head>

<body>

<div class="g">
    <div class="g-row">
        <div class="f-col-2">
            <div class="f-column">
                <h1>Отчёт frontend цеха</h1>
            </div>
            <div class="f-column">
                <code class="code" id="month"></code>
            </div>
        </div>
    </div>

    <div class="g-row">
        <div class="f-col-2">
            <div class="f-column">
                &nbsp;
            </div>
            <div class="f-column">
                <div class="ct-chart"></div>
            </div>
        </div>
    </div>
    <div class="g-row">
        <div class="lku" data-id="lku">
            <h3>Личный кабинет юр. лиц</h3><p></p>
        </div>
        <div class="lkf" data-id="lkf">
            <h3>Личный кабинет физ. лиц</h3><p></p>
        </div>
        <div class="rb" data-id="rb">
            <h3>Сайт - Robokassa</h3><p></p>
        </div>
        <div class="rest" data-id="rest">
            <h3>Остальные сервисы и проекты</h3><p></p>
        </div>
    </div>
</div>


<form class="">
    <div><input id="LkuGraph" type="text" class="" placeholder="lku"></div>
    <div><input id="LkfGraph" type="text" class="" placeholder="lkf"></div>
    <div><input id="RbGraph" type="text" class="" placeholder="rb"></div>
    <div><input id="RestGraph" type="text" class="" placeholder="rest"></div>
    <div><input id="Rb_Payments" type="text" class="" placeholder="rb_payments"></div>
    <div><input id="Showcase" type="text" class="" placeholder="showcase"></div>


    <div><a class="btn" id="GraphCollector">Stuff</a></div>
    <div><textarea id="lku" class="" placeholder="lku"></textarea></div>
    <div><textarea id="lkf" class="" placeholder="lkf"></textarea></div>
    <div><textarea id="rb" class="" placeholder="rb"></textarea></div>
    <div><textarea id="rest" class="" placeholder="rest"></textarea></div>
</form>







<!--Import jQuery before materialize.js-->
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.96.1/js/materialize.min.js"></script>-->
<script src="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
<script>
    (function ($)
    {
        $(function ()
        {

            var months = ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            var today = new Date();

            today.setTime(today.getTime());
            $("#month").text(months[today.getMonth()]).append("<sup>"+today.getFullYear()+"</sup>");

            $("textarea").change(function (id)
            {

                //var str = document.getElementById('comma').value.replace('\r', '');
                //var result = str.split('\n');

                var t = $(this);
                var TextareaId = id.target.id;
                var tText = t.val()
                tText = tText.replace(/\r?\n/g, '<br />');

                $("div[data-id='"+ TextareaId +"'] p").text(tText);
                //$("div[data-id='"+ TextareaId +"'] p").text(t.val());
                t.parent().addClass("filled");
            });

            // graph array creation
            $("#GraphCollector").on("click", function () 
            { 
                var partner = $("#LkuGraph").val();
                var my = $("#LkfGraph").val();
                var main = $("#RbGraph").val();
                var rest = $("#RestGraph").val();
                var rb_payments = $("#Rb_Payments").val();
                var showcase = $("#Showcase").val();

                GraphArray = new Array(partner, my, main, rest, rb_payments, showcase);
                graph();
            });
           

            // chart
            function graph(event) {
                new Chartist.Bar('.ct-chart', {
                    labels: ['lku', 'lkf', 'rb', 'rest', 'rb_payments', 'showcase'],
                    series: [
                        //[1, 2, 3, 4.5]                       
                        GraphArray
                    ]
                }, {
                    low: 0,
                    scaleMinSpace: 1,
                    high: 10
                }).on('draw', function(data) {
                    if (data.type === 'bar')
                    {
                        data.element.attr({
                            style: 'stroke-width: 30px'
                        });
                    }
                });
            }
        });
    })(jQuery);
</script>
</body>
</html>